<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íƒœì–‘ê³„ 3D ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            overflow: hidden;
            background: #000;
        }

        #canvas-container {
            width: 100vw;
            height: 100vh;
        }

        #info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #4a90e2;
            min-width: 280px;
            backdrop-filter: blur(10px);
        }

        #info-panel h2 {
            font-size: 20px;
            margin-bottom: 15px;
            color: #4a90e2;
            border-bottom: 2px solid #4a90e2;
            padding-bottom: 8px;
        }

        .planet-info {
            margin: 12px 0;
            padding: 10px;
            background: rgba(74, 144, 226, 0.1);
            border-radius: 5px;
            border-left: 3px solid #4a90e2;
        }

        .planet-info strong {
            color: #ffd700;
            font-size: 16px;
            display: block;
            margin-bottom: 5px;
        }

        .planet-info span {
            color: #ccc;
            font-size: 13px;
        }

        #controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            border: 2px solid #4a90e2;
            backdrop-filter: blur(10px);
        }

        #controls h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #4a90e2;
        }

        #controls p {
            font-size: 13px;
            margin: 5px 0;
            color: #ccc;
        }

        .key {
            display: inline-block;
            background: #4a90e2;
            padding: 2px 8px;
            border-radius: 3px;
            font-weight: bold;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>

    <div id="info-panel">
        <h2>ğŸŒŒ íƒœì–‘ê³„ í–‰ì„± ì •ë³´</h2>
        <div class="planet-info">
            <strong>ìˆ˜ì„± (Mercury)</strong>
            <span>ê³µì „ ì£¼ê¸°: 88ì¼</span>
        </div>
        <div class="planet-info">
            <strong>ê¸ˆì„± (Venus)</strong>
            <span>ê³µì „ ì£¼ê¸°: 225ì¼</span>
        </div>
        <div class="planet-info">
            <strong>ì§€êµ¬ (Earth)</strong>
            <span>ê³µì „ ì£¼ê¸°: 365ì¼</span>
        </div>
        <div class="planet-info">
            <strong>í™”ì„± (Mars)</strong>
            <span>ê³µì „ ì£¼ê¸°: 687ì¼</span>
        </div>
    </div>

    <div id="controls">
        <h3>âŒ¨ï¸ ì¡°ì‘ë²•</h3>
        <p><span class="key">ë§ˆìš°ìŠ¤ ë“œë˜ê·¸</span> ì‹œì  íšŒì „</p>
        <p><span class="key">1</span> ìˆ˜ì„± í¬ì»¤ìŠ¤</p>
        <p><span class="key">2</span> ê¸ˆì„± í¬ì»¤ìŠ¤</p>
        <p><span class="key">3</span> ì§€êµ¬ í¬ì»¤ìŠ¤</p>
        <p><span class="key">4</span> í™”ì„± í¬ì»¤ìŠ¤</p>
        <p><span class="key">0</span> ì „ì²´ ë³´ê¸°</p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // ì”¬, ì¹´ë©”ë¼, ë Œë”ëŸ¬ ì„¤ì •
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });

        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // ë°°ê²½ - ë³„ì´ ë¹›ë‚˜ëŠ” ìš°ì£¼
        const starGeometry = new THREE.BufferGeometry();
        const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.7 });
        const starVertices = [];
        for (let i = 0; i < 10000; i++) {
            const x = (Math.random() - 0.5) * 2000;
            const y = (Math.random() - 0.5) * 2000;
            const z = (Math.random() - 0.5) * 2000;
            starVertices.push(x, y, z);
        }
        starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
        const stars = new THREE.Points(starGeometry, starMaterial);
        scene.add(stars);

        // íƒœì–‘ ìƒì„± (ë¹›ì„ ë°œí•˜ëŠ” íš¨ê³¼)
        const sunGeometry = new THREE.SphereGeometry(5, 32, 32);
        const sunMaterial = new THREE.MeshBasicMaterial({
            color: 0xfdb813,
            emissive: 0xfdb813,
            emissiveIntensity: 1
        });
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        scene.add(sun);

        // íƒœì–‘ ë¹› íš¨ê³¼
        const sunLight = new THREE.PointLight(0xffffff, 2, 300);
        sunLight.position.set(0, 0, 0);
        scene.add(sunLight);

        const ambientLight = new THREE.AmbientLight(0x333333);
        scene.add(ambientLight);

        // í–‰ì„± ë°ì´í„° (í¬ê¸°, ê±°ë¦¬, ìƒ‰ìƒ, ê³µì „ì£¼ê¸°, ìì „ì†ë„)
        const planetsData = [
            { name: 'ìˆ˜ì„±', radius: 0.8, distance: 12, color: 0x8c7853, orbitPeriod: 88, rotationSpeed: 0.01 },
            { name: 'ê¸ˆì„±', radius: 1.2, distance: 18, color: 0xffc649, orbitPeriod: 225, rotationSpeed: 0.008 },
            { name: 'ì§€êµ¬', radius: 1.3, distance: 25, color: 0x4a90e2, orbitPeriod: 365, rotationSpeed: 0.02 },
            { name: 'í™”ì„±', radius: 1.0, distance: 32, color: 0xdc4c3e, orbitPeriod: 687, rotationSpeed: 0.018 }
        ];

        const planets = [];
        const orbits = [];

        // í–‰ì„± ë° ê¶¤ë„ ìƒì„±
        planetsData.forEach((data, index) => {
            // ê¶¤ë„ì„ 
            const orbitGeometry = new THREE.RingGeometry(data.distance - 0.1, data.distance + 0.1, 128);
            const orbitMaterial = new THREE.MeshBasicMaterial({
                color: 0x444444,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.3
            });
            const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
            orbit.rotation.x = Math.PI / 2;
            scene.add(orbit);
            orbits.push(orbit);

            // í–‰ì„±
            const planetGeometry = new THREE.SphereGeometry(data.radius, 32, 32);
            const planetMaterial = new THREE.MeshPhongMaterial({
                color: data.color,
                shininess: 30
            });
            const planet = new THREE.Mesh(planetGeometry, planetMaterial);
            planet.castShadow = true;
            planet.receiveShadow = true;

            // í–‰ì„± ê·¸ë£¹ (ê³µì „ì„ ìœ„í•´)
            const planetGroup = new THREE.Group();
            planet.position.x = data.distance;
            planetGroup.add(planet);
            scene.add(planetGroup);

            planets.push({
                group: planetGroup,
                mesh: planet,
                data: data,
                angle: Math.random() * Math.PI * 2
            });

            // ì§€êµ¬ì— ë‹¬ ì¶”ê°€
            if (data.name === 'ì§€êµ¬') {
                const moonGeometry = new THREE.SphereGeometry(0.4, 16, 16);
                const moonMaterial = new THREE.MeshPhongMaterial({ color: 0xaaaaaa });
                const moon = new THREE.Mesh(moonGeometry, moonMaterial);
                moon.position.x = 3;
                planet.add(moon);

                planets[index].moon = moon;
            }
        });

        // ì¹´ë©”ë¼ ì´ˆê¸° ìœ„ì¹˜
        camera.position.set(0, 40, 50);
        camera.lookAt(0, 0, 0);

        // ë§ˆìš°ìŠ¤ ì»¨íŠ¸ë¡¤
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        let cameraAngle = { theta: 0, phi: Math.PI / 6 };
        let cameraDistance = 60;
        let focusedPlanet = null;

        renderer.domElement.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMousePosition = { x: e.clientX, y: e.clientY };
        });

        renderer.domElement.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - previousMousePosition.x;
                const deltaY = e.clientY - previousMousePosition.y;

                cameraAngle.theta -= deltaX * 0.005;
                cameraAngle.phi += deltaY * 0.005;

                // ìƒí•˜ ê°ë„ ì œí•œ
                cameraAngle.phi = Math.max(0.1, Math.min(Math.PI - 0.1, cameraAngle.phi));

                previousMousePosition = { x: e.clientX, y: e.clientY };
            }
        });

        renderer.domElement.addEventListener('mouseup', () => {
            isDragging = false;
        });

        renderer.domElement.addEventListener('wheel', (e) => {
            e.preventDefault();
            cameraDistance += e.deltaY * 0.05;
            cameraDistance = Math.max(15, Math.min(150, cameraDistance));
        });

        // í‚¤ë³´ë“œ ì»¨íŠ¸ë¡¤ - í–‰ì„± í¬ì»¤ìŠ¤
        document.addEventListener('keydown', (e) => {
            const key = parseInt(e.key);
            if (key >= 1 && key <= 4) {
                focusedPlanet = planets[key - 1];
                cameraDistance = 15;
            } else if (key === 0) {
                focusedPlanet = null;
                cameraDistance = 60;
            }
        });

        // ì• ë‹ˆë©”ì´ì…˜
        function animate() {
            requestAnimationFrame(animate);

            // íƒœì–‘ ìì „
            sun.rotation.y += 0.001;

            // í–‰ì„±ë“¤ ê³µì „ ë° ìì „
            planets.forEach((planet) => {
                // ê³µì „ (ì‹¤ì œ ì£¼ê¸° ë¹„ìœ¨ ë°˜ì˜)
                const orbitSpeed = (365 / planet.data.orbitPeriod) * 0.001;
                planet.angle += orbitSpeed;
                planet.group.rotation.y = planet.angle;

                // ìì „
                planet.mesh.rotation.y += planet.data.rotationSpeed;

                // ë‹¬ ê³µì „ (ì§€êµ¬ë§Œ)
                if (planet.moon) {
                    planet.moon.rotation.y += 0.05;
                    const moonOrbitAngle = Date.now() * 0.001;
                    planet.moon.position.x = Math.cos(moonOrbitAngle) * 3;
                    planet.moon.position.z = Math.sin(moonOrbitAngle) * 3;
                }
            });

            // ì¹´ë©”ë¼ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            let targetPosition = { x: 0, y: 0, z: 0 };

            if (focusedPlanet) {
                const planetWorldPos = new THREE.Vector3();
                focusedPlanet.mesh.getWorldPosition(planetWorldPos);
                targetPosition = planetWorldPos;
            }

            camera.position.x = targetPosition.x + cameraDistance * Math.sin(cameraAngle.phi) * Math.cos(cameraAngle.theta);
            camera.position.y = targetPosition.y + cameraDistance * Math.cos(cameraAngle.phi);
            camera.position.z = targetPosition.z + cameraDistance * Math.sin(cameraAngle.phi) * Math.sin(cameraAngle.theta);
            camera.lookAt(targetPosition.x, targetPosition.y, targetPosition.z);

            renderer.render(scene, camera);
        }

        // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>